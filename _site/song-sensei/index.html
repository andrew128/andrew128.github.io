<!DOCTYPE html>
<html>
  <head>
    <title>Song Sensei - Use an LLM for Song Suggestions – Andrew Wei – </title>

        <meta charset="utf-8" />
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0'>

    
    <meta name="description" content="Visit song-sensei.vercel.app to chat with a bot llm to find the music you want on Spotify
" />
    <meta property="og:description" content="Visit song-sensei.vercel.app to chat with a bot llm to find the music you want on Spotify
" />
    
    <meta name="author" content="Andrew Wei" />

    
    <meta property="og:title" content="Song Sensei - Use an LLM for Song Suggestions" />
    <meta property="twitter:title" content="Song Sensei - Use an LLM for Song Suggestions" />
    

    <!--[if lt IE 9]>
      <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link rel="stylesheet" type="text/css" href="/style.css" />
    <link rel="alternate" type="application/rss+xml" title="Andrew Wei - " href="/feed.xml" />

    <!-- Created with Jekyll Now - http://github.com/barryclark/jekyll-now -->
  </head>

  <body>
    <div class="wrapper-masthead">
      <div class="container">
        <header class="masthead clearfix">
          <a href="/" class="site-avatar"><img src="https://avatars0.githubusercontent.com/u/8172167?s=400&u=27034bc93779390bfbaca21727973a54058fc093&v=4" /></a>

          <div class="site-info">
            <h1 class="site-name"><a href="/">Andrew Wei</a></h1>
            <p class="site-description"></p>
          </div>

          <nav>
            <a href="/">Blog</a>
            <a href="/about">About</a>
          </nav>
        </header>
      </div>
    </div>

    <div id="main" role="main" class="container">
      <script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_CHTML"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
  tex2jax: {
  inlineMath: [['$','$'], ['\\(','\\)']],
  processEscapes: true},
  jax: ["input/TeX","input/MathML","input/AsciiMath","output/CommonHTML"],
  extensions: ["tex2jax.js","mml2jax.js","asciimath2jax.js","MathMenu.js","MathZoom.js","AssistiveMML.js", "[Contrib]/a11y/accessibility-menu.js"],
  TeX: {
  extensions: ["AMSmath.js","AMSsymbols.js","noErrors.js","noUndefined.js"],
  equationNumbers: {
  autoNumber: "AMS"
  }
  }
  });
  </script>
<article class="post">
  <h1>Song Sensei - Use an LLM for Song Suggestions</h1>

  <div class="date">
    Written on July 21, 2023
  </div>
  <div class="entry">
    <p>Visit <a href="song-sensei.vercel.app">song-sensei.vercel.app</a> to chat with a bot llm to find the music you want on Spotify</p>

<h2 id="post-outline">Post Outline</h2>
<ul>
  <li><a href="#what-and-why">What and Why</a></li>
  <li><a href="#architecture">Architecture</a></li>
  <li><a href="#key-design-decisions">Key design decisions</a></li>
  <li><a href="#what-i-learned">What I learned</a></li>
  <li><a href="#looking-forward">Looking forward</a></li>
</ul>

<h2 id="what-and-why">What and Why</h2>
<p>Chat GPT has shown that it can find song suggestions based on conversational human input quite easily. The difference between this and spotify (and other song recommenders from my brief research) is the LLM component. The conversational format allows for the following sorts of questions:</p>

<ul>
  <li>“I want a more dreamy and slow song suggestion”</li>
  <li>“I want instrumental suggestions”</li>
  <li>“Create a retro synth wave playlist for me”</li>
  <li>“Make it more edgy”</li>
  <li>“Make me a playlist of songs similar to x”</li>
</ul>

<p>Of course these questions could all be done manually (e.g. by manually combing other song recommender outputs for instrumental only versions) but this app eliminates that work. In addition, it is connected to the Spotify API so the user can listen to song suggestions easily and create playlists automatically.</p>

<h2 id="architecture">Architecture</h2>
<p>Song Sensei combines the Spotify API and the Langchain API together in a React based web app written in NextJS and deployed on Vercel. 
This app consists of two pages.</p>
<ul>
  <li>
    <p>song-sensei/pages/index.js: main page component that also performs sptoify authorization</p>
  </li>
  <li>
    <p>song-sensei/pages/chat/index.js: chat components that contains logic to automatically find and add search results to a new playlist in the user’s logged in Spotify</p>
  </li>
</ul>

<h2 id="key-design-decisions">Key design decisions</h2>
<ul>
  <li>Making a website (as opposed to a script): more user friendly, accessible anywhere</li>
  <li>Model choice: Chat gpt 3.5 turbo because its the most complex version available publicly</li>
  <li>Hyperparam choice: Temperature of 0.8 because that was the recommended value in Stephen Wolfram’s blog post</li>
  <li>Spotify: I personally use spotify and am familiar with the interface</li>
  <li>NextJS/Vercel: I chose this stack because I was already familiar with React and the deployment was very easy for my use case</li>
</ul>

<h2 id="what-i-learned">What I learned</h2>
<ul>
  <li>how to set up open AI api - rate limiting, tokens</li>
  <li>Spotify api</li>
  <li>different models - da vinci vs chat gpt</li>
  <li>memory at a basic level, bufferered windows</li>
  <li>prompt engineering</li>
  <li>Next JS/Vercel deployments</li>
  <li>process.env and how to load environment variables</li>
  <li>Oauth authentication</li>
  <li>React concepts: state, router, useEffect</li>
</ul>

<h2 id="looking-forward">Looking forward</h2>
<ul>
  <li>
    <p>Add “memory” to model to be able to have more conversational mdeol</p>
  </li>
  <li>
    <p>Add song granularity: ability to choose whether want to add specific songs</p>
  </li>
  <li>
    <p>Add loading UI</p>
  </li>
  <li>
    <p>Add ability to play songs in browser</p>
  </li>
  <li>
    <p>Add streaming so that the output is streamed like messages and not sent all at once - also add a loading bar maybe</p>
  </li>
  <li>
    <p>use redux/react content for secure state management solutions instead of including tokens and access keys in the redirect URI query parameters</p>
  </li>
  <li>
    <p>Voice component: users can speak with the app in addition to texting</p>
  </li>
  <li>
    <p>Image background generation: users can converse with an image model to generate a picture for the playlist. Idea could be to first chat with bot to figure out songs, then chat with bot to figure out album cover. Could even ask bot to suggest cover art based on the following.</p>
  </li>
</ul>

  </div>


  
</article>

    </div>

    <div class="wrapper-footer">
      <div class="container">
        <footer class="footer">
          



<a href="https://github.com/andrew128"><i class="svg-icon github"></i></a>

<a href="https://www.linkedin.com/in/andrew-wei-272027147/"><i class="svg-icon linkedin"></i></a>






        </footer>
      </div>
    </div>

    
	<!-- Google Analytics -->
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','//www.google-analytics.com/analytics.js','ga');

		ga('create', 'UA-177211139-1', 'auto');
		ga('send', 'pageview', {
		  'page': '/song-sensei/',
		  'title': 'Song Sensei - Use an LLM for Song Suggestions'
		});
	</script>
	<!-- End Google Analytics -->


  </body>
</html>
